<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SECURE ACCESS</title>

<style>
body{
  margin:0;
  background:black;
  color:#00ff00;
  font-family:monospace;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  transition:0.1s;
}

.flash{
  background:red !important;
}

#loading{
  position:fixed;
  width:100%;
  height:100%;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:20px;
}

#cookieBox{
  position:fixed;
  bottom:0;
  width:100%;
  background:#111;
  padding:15px;
  text-align:center;
  display:none;
}

#loginBox{
  text-align:center;
  display:none;
}

input,button{
  background:black;
  border:1px solid #00ff00;
  color:#00ff00;
  padding:12px;
  margin-top:10px;
}
</style>
</head>

<body>

<div id="loading">INITIALIZING SYSTEM...</div>

<div id="loginBox">
  <h2>ENTER PASSWORD</h2>
  <input type="password" id="pass">
  <br>
  <button onclick="checkPass()">ACCESS</button>
  <p id="msg"></p>
</div>

<div id="cookieBox">
  เว็บไซต์นี้ต้องการใช้คุกกี้เพื่อจดจำการเข้าสู่ระบบ<br>
  <button onclick="acceptCookies()">ยอมรับคุกกี้</button>
</div>

<audio id="bgMusic" loop>
  <source src="https://files.catbox.moe/8zj8dz.mp3" type="audio/mpeg">
</audio>

<script>

// ตรวจว่ารับคุกกี้แล้วหรือยัง
function hasAcceptedCookies(){
  return document.cookie.includes("accepted=true");
}

// โหลดหน้า
setTimeout(function(){
  document.getElementById("loading").style.display="none";
  
  if(hasAcceptedCookies()){
    document.getElementById("loginBox").style.display="block";
  }else{
    document.getElementById("cookieBox").style.display="block";
  }
},2000);

// กดยอมรับคุกกี้
function acceptCookies(){
  document.cookie = "accepted=true; path=/; max-age=31536000";
  document.getElementById("cookieBox").style.display="none";
  document.getElementById("loginBox").style.display="block";
  vibrateAndFlash([200,100,200],3);
}

// สั่น + กระพริบ
function vibrateAndFlash(pattern,times){
  if("vibrate" in navigator){
    navigator.vibrate(pattern);
  }

  let i=0;
  let fx=setInterval(function(){
    document.body.classList.toggle("flash");
    i++;
    if(i>=times*2){
      clearInterval(fx);
      document.body.classList.remove("flash");
    }
  },120);
}

var password="1234";

function checkPass(){
  var input=document.getElementById("pass").value;

  if(input===password){
    document.getElementById("msg").innerHTML="ACCESS GRANTED";
    document.getElementById("bgMusic").play();
    vibrateAndFlash([300,100,300,100,500],6);
  }else{
    document.getElementById("msg").innerHTML="ACCESS DENIED";
    vibrateAndFlash([200],2);
  }
}

// Enter ได้
document.getElementById("pass").addEventListener("keyup",function(e){
  if(e.key==="Enter"){
    checkPass();
  }
});

</script>

</body>
</html>
